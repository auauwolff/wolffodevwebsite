---
import { Image } from "astro:assets";
import figma_log from "../../assets/images/figma_log.png";
import astro_logo from "../../assets/images/astro_logo.png";
import react_logo from "../../assets/images/react_logo.png";
import shopify_logo from "../../assets/images/shopify_logo.png";
import square_logo from "../../assets/images/square_logo.png";
---

<div class="bg-black py-20 flex flex-col items-center justify-center">
  <div class="flex flex-col items-center justify-center">
    <h1 class="text-white text-4xl font-bold lg:text-6xl">OUR TECH STACK</h1>
    <p class="text-secondary font-semibold mt-2 lg:m-4 lg:text-lg">
      Powering Your Business Success
    </p>
  </div>

  <!-- Mobile: Show swipe hint -->
  <div class="lg:hidden text-center mb-4">
    <p class="text-secondary text-sm">← Swipe to see more →</p>
  </div>

  <!-- Carousel Container with fade edges -->
  <div class="relative w-full max-w-6xl">
    <!-- Left fade gradient -->
    <div
      class="absolute left-0 top-0 w-8 h-full bg-gradient-to-r from-black to-transparent z-10 lg:block hidden pointer-events-none"
    >
    </div>
    <!-- Right fade gradient -->
    <div
      class="absolute right-0 top-0 w-8 h-full bg-gradient-to-l from-black to-transparent z-10 lg:block hidden pointer-events-none"
    >
    </div>

    <div
      id="tech-carousel"
      class="carousel carousel-center p-4 space-x-4 bg-neutral rounded-box py-12 lg:py-20 max-w-xs lg:max-w-none scroll-smooth snap-x snap-mandatory overflow-x-auto"
    >
      <div
        class="carousel-item flex flex-col items-center justify-center max-w-sm text-center snap-center"
      >
        <Image alt="Figma logo" height={60} width={60} src={figma_log} />
        <p class="text-white text-lg pt-2">Figma</p>
        <p class="text-secondary font-semibold text-sm pt-2 px-10">
          A cloud-based design tool that allows for collaboration and
          prototyping.
        </p>
      </div>

      <div
        class="carousel-item flex flex-col items-center justify-center max-w-sm text-center snap-center"
      >
        <Image alt="Astro logo" height={80} width={80} src={astro_logo} />
        <p class="text-white text-lg pt-2">Astro</p>
        <p class="text-secondary font-semibold text-sm p-3 px-10">
          A modern static site builder that optimizes performance and developer
          experience.
        </p>
      </div>
      <div
        class="carousel-item flex flex-col items-center justify-center max-w-sm text-center snap-center"
      >
        <Image alt="React logo" height={80} width={80} src={react_logo} />
        <p class="text-white text-lg pt-2">React</p>
        <p class="text-secondary font-semibold text-sm p-3 px-10">
          A popular JavaScript library for building user interfaces.
        </p>
      </div>
      <div
        class="carousel-item flex flex-col items-center justify-center max-w-sm text-center snap-center"
      >
        <Image alt="Squareup logo" height={80} width={80} src={square_logo} />
        <p class="text-white text-lg pt-2">Squareup</p>
        <p class="text-secondary font-semibold text-sm p-3 px-10">
          A payment processing platform for small businesses and online stores.
        </p>
      </div>
      <!-- <div
        class="carousel-item flex flex-col items-center justify-center max-w-sm text-center snap-center"
      >
        <Image alt="Shopify logo" height={80} width={80} src={shopify_logo} />
        <p class="text-white text-lg pt-2">Shopify</p>
        <p class="text-secondary font-semibold text-sm p-3">
          An e-commerce platform for online stores that provides tools for
          managing inventory, shipping, and payments.
        </p>
      </div>
    </div> -->
    </div>
  </div>

  <!-- Carousel Indicators/Dots -->
  <div class="flex justify-center mt-6 space-x-2 lg:hidden">
    <button
      class="carousel-dot w-3 h-3 rounded-full bg-secondary hover:bg-primary transition-colors duration-200"
      onclick="document.getElementById('tech-carousel').scrollTo({left: 0, behavior: 'smooth'})"
    ></button>
    <button
      class="carousel-dot w-3 h-3 rounded-full bg-secondary hover:bg-primary transition-colors duration-200"
      onclick="document.getElementById('tech-carousel').scrollTo({left: document.getElementById('tech-carousel').scrollWidth * 0.33, behavior: 'smooth'})"
    ></button>
    <button
      class="carousel-dot w-3 h-3 rounded-full bg-secondary hover:bg-primary transition-colors duration-200"
      onclick="document.getElementById('tech-carousel').scrollTo({left: document.getElementById('tech-carousel').scrollWidth * 0.66, behavior: 'smooth'})"
    ></button>
    <button
      class="carousel-dot w-3 h-3 rounded-full bg-secondary hover:bg-primary transition-colors duration-200"
      onclick="document.getElementById('tech-carousel').scrollTo({left: document.getElementById('tech-carousel').scrollWidth, behavior: 'smooth'})"
    ></button>
  </div>
</div>

<script>
  // Update active dot based on scroll position
  document.addEventListener("DOMContentLoaded", () => {
    const carousel = document.getElementById("tech-carousel");
    const dots = document.querySelectorAll(".carousel-dot");

    if (carousel && dots.length > 0) {
      const updateActiveDot = () => {
        const scrollLeft = carousel.scrollLeft;
        const scrollWidth = carousel.scrollWidth - carousel.clientWidth;
        const scrollPercentage = scrollLeft / scrollWidth;

        // Determine which dot should be active
        let activeDotIndex = Math.round(scrollPercentage * (dots.length - 1));
        activeDotIndex = Math.max(0, Math.min(activeDotIndex, dots.length - 1));

        // Update dot styles
        dots.forEach((dot, index) => {
          if (index === activeDotIndex) {
            dot.classList.remove("bg-secondary");
            dot.classList.add("bg-primary");
          } else {
            dot.classList.remove("bg-primary");
            dot.classList.add("bg-secondary");
          }
        });
      };

      // Update on scroll
      carousel.addEventListener("scroll", updateActiveDot);

      // Initial update
      updateActiveDot();
    }
  });
</script>
